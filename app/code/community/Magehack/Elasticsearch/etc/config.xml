<?xml version="1.0" encoding="UTF-8"?>
<config>
	<modules>
		<Magehack_Elasticsearch>
			<version>1.0.1</version>
		</Magehack_Elasticsearch>
	</modules>
	<global>
		<elasticsearch>
			<types>
				<product>
					<feed_class>elasticsearch/feed_product</feed_class>
					<model_class>catalog/product</model_class>
					<name>product</name>
					<enabled>1</enabled>
				</product>
				<cmspage>
					<feed_class>elasticsearch/feed_cmspage</feed_class>
					<model_class>cms/page</model_class>
					<name>cmspage</name>
					<enabled>1</enabled>
				</cmspage>
			</types>
		</elasticsearch>
		<blocks>
			<elasticsearch>
				<class>Magehack_Elasticsearch_Block</class>
			</elasticsearch>	
			<catalogsearch>
                <rewrite>
                    <result>Magehack_Elasticsearch_Block_CatalogSearch_Result</result>
                </rewrite>
                <args>
                    <modules>
                        <magehack_elasticsearch before="Mage_CatalogSearch">Magehack_Elasticsearch</magehack_elasticsearch>
                    </modules>
                </args>
            </catalogsearch>	
		</blocks>
		<helpers>
			<elasticsearch>
				<class>Magehack_Elasticsearch_Helper</class>
			</elasticsearch>
		</helpers>
		<models>
			<elasticsearch>
				<class>Magehack_Elasticsearch_Model</class>
				<resourceModel>elasticsearch_mysql4</resourceModel>
			</elasticsearch>
			<elasticsearch_mysql4>
				<class>Magehack_Elasticsearch_Model_Mysql4</class>
				<entities>
					<queue_item>
						<table>elasticsearch_queue_item</table>
					</queue_item>
					<etype>
						<table>elasticsearch_etype</table>
					</etype>
					<equery>
						<table>elasticsearch_equery</table>
					</equery>
				</entities>
			</elasticsearch_mysql4>
		</models>
		<resources>
            <elasticsearch_setup>
                <setup>
                    <module>Magehack_Elasticsearch</module>
                </setup>
                <connection>
                    <use>core_setup</use>
                </connection>
            </elasticsearch_setup>
            <elasticsearch_write>
                <connection>
                    <use>core_write</use>
                </connection>
            </elasticsearch_write>
            <elasticsearch_read>
                <connection>
                    <use>core_read</use>
                </connection>
            </elasticsearch_read>
        </resources>
	</global>
	<frontend>
		<routers>
            <elasticsearch>
                <use>standard</use>
                <args>
                    <module>Magehack_Elasticsearch</module>
                    <frontName>elasticsearch</frontName>
                </args>
            </elasticsearch>
            <catalog>
				<args>
					<modules>
						<magehack_elasticsearch before="Mage_Catalog">Magehack_Elasticsearch</magehack_elasticsearch>
					</modules>
				</args>
			</catalog>		
        </routers>
		<layout>
            <updates>
                <elasticsearch>
                    <file>elasticsearch.xml</file>
                </elasticsearch>
            </updates>
        </layout>
	</frontend>
</config>
